2025-05-21 11:15:03.847 +01:00 [ERR] An error occurred using the connection to database 'BDCTS1' on server 'tcp://localhost:5432'.
2025-05-21 11:15:05.235 +01:00 [INF] Executed DbCommand (915ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "BDCTS1";
2025-05-21 11:15:05.677 +01:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-05-21 11:15:05.687 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-05-21 11:15:05.693 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-05-21 11:15:05.696 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-05-21 11:15:05.708 +01:00 [INF] Applying migration '20250521101425_InitialMigration'.
2025-05-21 11:15:05.758 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetRoles" (
    "Id" text NOT NULL,
    "Name" character varying(256),
    "NormalizedName" character varying(256),
    "ConcurrencyStamp" text,
    CONSTRAINT "PK_AspNetRoles" PRIMARY KEY ("Id")
);
2025-05-21 11:15:05.770 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Contributors" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Name" character varying(100) NOT NULL,
    "Status" integer NOT NULL,
    "PhoneNumber_CountryCode" text,
    "PhoneNumber_Number" text,
    "PhoneNumber_Extension" text,
    CONSTRAINT "PK_Contributors" PRIMARY KEY ("Id")
);
2025-05-21 11:15:05.773 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Wilayas" (
    "Id" integer NOT NULL,
    "Nom" text NOT NULL,
    CONSTRAINT "PK_Wilayas" PRIMARY KEY ("Id")
);
2025-05-21 11:15:05.794 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetRoleClaims" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "RoleId" text NOT NULL,
    "ClaimType" text,
    "ClaimValue" text,
    CONSTRAINT "PK_AspNetRoleClaims" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AspNetRoleClaims_AspNetRoles_RoleId" FOREIGN KEY ("RoleId") REFERENCES "AspNetRoles" ("Id") ON DELETE CASCADE
);
2025-05-21 11:15:05.798 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "BloodTansfusionCenters" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "Address" text,
    "Contact" text,
    "Email" text,
    "Tel" text,
    "WilayaId" integer NOT NULL,
    CONSTRAINT "PK_BloodTansfusionCenters" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_BloodTansfusionCenters_Wilayas_WilayaId" FOREIGN KEY ("WilayaId") REFERENCES "Wilayas" ("Id") ON DELETE RESTRICT
);
2025-05-21 11:15:05.802 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Communes" (
    "Id" integer NOT NULL,
    "Nom" text NOT NULL,
    "WilayaId" integer NOT NULL,
    CONSTRAINT "PK_Communes" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Communes_Wilayas_WilayaId" FOREIGN KEY ("WilayaId") REFERENCES "Wilayas" ("Id") ON DELETE CASCADE
);
2025-05-21 11:15:05.810 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "BloodDonationRequests" (
    "Id" uuid NOT NULL,
    "EvolutionStatus" integer NOT NULL,
    "DonationType" integer NOT NULL,
    "BloodGroup" integer NOT NULL,
    "RequestedQty" integer NOT NULL,
    "RequestDate" timestamp with time zone NOT NULL,
    "RequestDueDate" timestamp with time zone,
    "Priority" integer NOT NULL,
    "MoreDetails" text,
    "ServiceName" text,
    "BloodTansfusionCenterId" uuid NOT NULL,
    CONSTRAINT "PK_BloodDonationRequests" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_BloodDonationRequests_BloodTansfusionCenters_BloodTansfusio~" FOREIGN KEY ("BloodTansfusionCenterId") REFERENCES "BloodTansfusionCenters" ("Id") ON DELETE CASCADE
);
2025-05-21 11:15:05.812 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "BloodInventories" (
    "Id" uuid NOT NULL,
    "BloodTansfusionCenterId" uuid NOT NULL,
    "BloodGroup" integer NOT NULL,
    "BloodDonationType" integer NOT NULL,
    "TotalQty" integer,
    "MinQty" integer,
    "MaxQty" integer,
    CONSTRAINT "PK_BloodInventories" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_BloodInventories_BloodTansfusionCenters_BloodTansfusionCent~" FOREIGN KEY ("BloodTansfusionCenterId") REFERENCES "BloodTansfusionCenters" ("Id") ON DELETE CASCADE
);
2025-05-21 11:15:05.817 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUsers" (
    "Id" text NOT NULL,
    "IsAdmin" boolean NOT NULL,
    "DonorWantToStayAnonymous" boolean NOT NULL,
    "DonorExcludeFromPublicPortal" boolean NOT NULL,
    "DonorAvailability" integer,
    "DonorContactMethod" integer,
    "DonorName" text NOT NULL,
    "DonorBirthDate" timestamp with time zone NOT NULL,
    "DonorBloodGroup" integer NOT NULL,
    "DonorNIN" text NOT NULL,
    "DonorTel" text,
    "DonorNotesForBTC" text,
    "DonorLastDonationDate" timestamp with time zone,
    "CommuneId" integer,
    "UserName" character varying(256),
    "NormalizedUserName" character varying(256),
    "Email" character varying(256),
    "NormalizedEmail" character varying(256),
    "EmailConfirmed" boolean NOT NULL,
    "PasswordHash" text,
    "SecurityStamp" text,
    "ConcurrencyStamp" text,
    "PhoneNumber" text,
    "PhoneNumberConfirmed" boolean NOT NULL,
    "TwoFactorEnabled" boolean NOT NULL,
    "LockoutEnd" timestamp with time zone,
    "LockoutEnabled" boolean NOT NULL,
    "AccessFailedCount" integer NOT NULL,
    CONSTRAINT "PK_AspNetUsers" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AspNetUsers_Communes_CommuneId" FOREIGN KEY ("CommuneId") REFERENCES "Communes" ("Id")
);
2025-05-21 11:15:05.821 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUserClaims" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "UserId" text NOT NULL,
    "ClaimType" text,
    "ClaimValue" text,
    CONSTRAINT "PK_AspNetUserClaims" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AspNetUserClaims_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE
);
2025-05-21 11:15:05.824 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUserLogins" (
    "LoginProvider" text NOT NULL,
    "ProviderKey" text NOT NULL,
    "ProviderDisplayName" text,
    "UserId" text NOT NULL,
    CONSTRAINT "PK_AspNetUserLogins" PRIMARY KEY ("LoginProvider", "ProviderKey"),
    CONSTRAINT "FK_AspNetUserLogins_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE
);
2025-05-21 11:15:05.828 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUserRoles" (
    "UserId" text NOT NULL,
    "RoleId" text NOT NULL,
    CONSTRAINT "PK_AspNetUserRoles" PRIMARY KEY ("UserId", "RoleId"),
    CONSTRAINT "FK_AspNetUserRoles_AspNetRoles_RoleId" FOREIGN KEY ("RoleId") REFERENCES "AspNetRoles" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_AspNetUserRoles_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE
);
2025-05-21 11:15:05.831 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUserTokens" (
    "UserId" text NOT NULL,
    "LoginProvider" text NOT NULL,
    "Name" text NOT NULL,
    "Value" text,
    CONSTRAINT "PK_AspNetUserTokens" PRIMARY KEY ("UserId", "LoginProvider", "Name"),
    CONSTRAINT "FK_AspNetUserTokens_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE
);
2025-05-21 11:15:05.840 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "BloodDonationPledges" (
    "Id" uuid NOT NULL,
    "EvolutionStatus" integer NOT NULL,
    "PledgeInitiatedDate" timestamp with time zone NOT NULL,
    "PledgeDate" timestamp with time zone,
    "PledgeHonoredOrCanceledDate" timestamp with time zone,
    "PledgeNotes" text,
    "CantBeDoneReason" text,
    "BloodDonationRequestId" uuid NOT NULL,
    "ApplicationUserId" text NOT NULL,
    CONSTRAINT "PK_BloodDonationPledges" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_BloodDonationPledges_AspNetUsers_ApplicationUserId" FOREIGN KEY ("ApplicationUserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_BloodDonationPledges_BloodDonationRequests_BloodDonationReq~" FOREIGN KEY ("BloodDonationRequestId") REFERENCES "BloodDonationRequests" ("Id") ON DELETE CASCADE
);
2025-05-21 11:15:05.844 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "DonorBloodTransferCenterSubscriptions" (
    "Id" uuid NOT NULL,
    "BloodTansfusionCenterId" uuid NOT NULL,
    "ApplicationUserId" text NOT NULL,
    CONSTRAINT "PK_DonorBloodTransferCenterSubscriptions" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_DonorBloodTransferCenterSubscriptions_AspNetUsers_Applicati~" FOREIGN KEY ("ApplicationUserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_DonorBloodTransferCenterSubscriptions_BloodTansfusionCenter~" FOREIGN KEY ("BloodTansfusionCenterId") REFERENCES "BloodTansfusionCenters" ("Id") ON DELETE CASCADE
);
2025-05-21 11:15:05.846 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetRoleClaims_RoleId" ON "AspNetRoleClaims" ("RoleId");
2025-05-21 11:15:05.848 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "RoleNameIndex" ON "AspNetRoles" ("NormalizedName");
2025-05-21 11:15:05.849 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetUserClaims_UserId" ON "AspNetUserClaims" ("UserId");
2025-05-21 11:15:05.851 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetUserLogins_UserId" ON "AspNetUserLogins" ("UserId");
2025-05-21 11:15:05.852 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetUserRoles_RoleId" ON "AspNetUserRoles" ("RoleId");
2025-05-21 11:15:05.854 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "EmailIndex" ON "AspNetUsers" ("NormalizedEmail");
2025-05-21 11:15:05.856 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetUsers_CommuneId" ON "AspNetUsers" ("CommuneId");
2025-05-21 11:15:05.857 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "UserNameIndex" ON "AspNetUsers" ("NormalizedUserName");
2025-05-21 11:15:05.858 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_BloodDonationPledges_ApplicationUserId" ON "BloodDonationPledges" ("ApplicationUserId");
2025-05-21 11:15:05.859 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_BloodDonationPledges_BloodDonationRequestId" ON "BloodDonationPledges" ("BloodDonationRequestId");
2025-05-21 11:15:05.861 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_BloodDonationRequests_BloodTansfusionCenterId" ON "BloodDonationRequests" ("BloodTansfusionCenterId");
2025-05-21 11:15:05.862 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_BloodInventories_BloodTansfusionCenterId" ON "BloodInventories" ("BloodTansfusionCenterId");
2025-05-21 11:15:05.863 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_BloodTansfusionCenters_WilayaId" ON "BloodTansfusionCenters" ("WilayaId");
2025-05-21 11:15:05.864 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Communes_WilayaId" ON "Communes" ("WilayaId");
2025-05-21 11:15:05.866 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_DonorBloodTransferCenterSubscriptions_ApplicationUserId" ON "DonorBloodTransferCenterSubscriptions" ("ApplicationUserId");
2025-05-21 11:15:05.867 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_DonorBloodTransferCenterSubscriptions_BloodTansfusionCenter~" ON "DonorBloodTransferCenterSubscriptions" ("BloodTansfusionCenterId");
2025-05-21 11:15:05.868 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250521101425_InitialMigration', '9.0.4');
2025-05-21 11:16:53.503 +01:00 [INF] User profile is available. Using 'C:\Users\CHK\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-21 11:16:53.664 +01:00 [INF] Registered 8 endpoints in 644 milliseconds.
2025-05-21 11:16:55.525 +01:00 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2025-05-21 11:16:55.876 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Contributors" AS c)
2025-05-21 11:16:56.081 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Contributors" ("Name", "Status")
VALUES (@p0, @p1)
RETURNING "Id";
INSERT INTO "Contributors" ("Name", "Status")
VALUES (@p2, @p3)
RETURNING "Id";
2025-05-21 11:16:57.015 +01:00 [INF] Now listening on: https://localhost:57679
2025-05-21 11:16:57.021 +01:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-05-21 11:16:57.063 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-21 11:16:57.064 +01:00 [INF] Hosting environment: Development
2025-05-21 11:16:57.065 +01:00 [INF] Content root path: D:\walid-pfe\BloodDrop\src\BD.PublicPortal.Api
2025-05-21 11:17:37.709 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:57679/Contributors - null null
2025-05-21 11:17:37.787 +01:00 [INF] Executing endpoint 'HTTP: GET /Contributors'
2025-05-21 11:17:37.828 +01:00 [INF] Handling ListContributorsQuery
2025-05-21 11:17:37.830 +01:00 [INF] Property Skip : null
2025-05-21 11:17:37.833 +01:00 [INF] Property Take : null
2025-05-21 11:17:37.968 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "Id", "Name", "PhoneNumber_Number" AS PhoneNumber FROM "Contributors"
2025-05-21 11:17:37.978 +01:00 [INF] Handled ListContributorsQuery with Ardalis.Result.Result`1[System.Collections.Generic.IEnumerable`1[BD.PublicPortal.Infrastructure.Services.Contibutors.ContributorDTO]] in 143 ms
2025-05-21 11:17:38.011 +01:00 [INF] Executed endpoint 'HTTP: GET /Contributors'
2025-05-21 11:17:38.020 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:57679/Contributors - 200 null application/json; charset=utf-8 317.6295ms
2025-05-21 11:17:42.655 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:57679/Contributors/2 - null null
2025-05-21 11:17:42.660 +01:00 [INF] Executing endpoint 'HTTP: GET /Contributors/{ContributorId:int}'
2025-05-21 11:17:42.688 +01:00 [INF] Handling GetContributorQuery
2025-05-21 11:17:42.689 +01:00 [INF] Property ContributorId : 2
2025-05-21 11:17:42.810 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__contributorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."PhoneNumber_CountryCode", c."PhoneNumber_Extension", c."PhoneNumber_Number"
FROM "Contributors" AS c
WHERE c."Id" = @__contributorId_0
LIMIT 1
2025-05-21 11:17:42.822 +01:00 [INF] Handled GetContributorQuery with Ardalis.Result.Result`1[BD.PublicPortal.Infrastructure.Services.Contibutors.ContributorDTO] in 131 ms
2025-05-21 11:17:42.826 +01:00 [INF] Executed endpoint 'HTTP: GET /Contributors/{ContributorId:int}'
2025-05-21 11:17:42.827 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:57679/Contributors/2 - 200 null application/json; charset=utf-8 172.4579ms
2025-05-21 11:17:45.178 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/Contributors - application/json 89
2025-05-21 11:17:45.181 +01:00 [INF] Executing endpoint 'HTTP: POST /Contributors'
2025-05-21 11:17:45.192 +01:00 [INF] Handling CreateContributorCommand
2025-05-21 11:17:45.194 +01:00 [INF] Property Name : John Doe 2
2025-05-21 11:17:45.195 +01:00 [INF] Property PhoneNumber : 1234567890
2025-05-21 11:17:45.214 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?', @p4='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Contributors" ("Name", "Status", "PhoneNumber_CountryCode", "PhoneNumber_Extension", "PhoneNumber_Number")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-05-21 11:17:45.220 +01:00 [INF] Handled CreateContributorCommand with Ardalis.Result.Result`1[System.Int32] in 24 ms
2025-05-21 11:17:45.222 +01:00 [INF] Executed endpoint 'HTTP: POST /Contributors'
2025-05-21 11:17:45.223 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/Contributors - 200 null application/json; charset=utf-8 45.7135ms
2025-05-21 11:18:13.600 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:57679/Contributors/3 - application/json 38
2025-05-21 11:18:13.603 +01:00 [INF] Executing endpoint 'HTTP: PUT /Contributors/{ContributorId:int}'
2025-05-21 11:18:13.608 +01:00 [INF] Handling UpdateContributorCommand
2025-05-21 11:18:13.609 +01:00 [INF] Property ContributorId : 3
2025-05-21 11:18:13.610 +01:00 [INF] Property NewName : ardalis2
2025-05-21 11:18:13.633 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."PhoneNumber_CountryCode", c."PhoneNumber_Extension", c."PhoneNumber_Number"
FROM "Contributors" AS c
WHERE c."Id" = @__p_0
LIMIT 1
2025-05-21 11:18:13.647 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contributors" SET "Name" = @p0, "Status" = @p1
WHERE "Id" = @p2;
2025-05-21 11:18:13.649 +01:00 [INF] Handled UpdateContributorCommand with Ardalis.Result.Result`1[BD.PublicPortal.Infrastructure.Services.Contibutors.ContributorDTO] in 38 ms
2025-05-21 11:18:13.650 +01:00 [INF] Handling GetContributorQuery
2025-05-21 11:18:13.651 +01:00 [INF] Property ContributorId : 3
2025-05-21 11:18:13.654 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__contributorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."PhoneNumber_CountryCode", c."PhoneNumber_Extension", c."PhoneNumber_Number"
FROM "Contributors" AS c
WHERE c."Id" = @__contributorId_0
LIMIT 1
2025-05-21 11:18:13.656 +01:00 [INF] Handled GetContributorQuery with Ardalis.Result.Result`1[BD.PublicPortal.Infrastructure.Services.Contibutors.ContributorDTO] in 4 ms
2025-05-21 11:18:13.657 +01:00 [INF] Executed endpoint 'HTTP: PUT /Contributors/{ContributorId:int}'
2025-05-21 11:18:13.658 +01:00 [INF] Request finished HTTP/1.1 PUT https://localhost:57679/Contributors/3 - 200 null application/json; charset=utf-8 58.1349ms
2025-05-21 11:18:22.321 +01:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:57679/Contributors/3 - null null
2025-05-21 11:18:22.323 +01:00 [INF] Executing endpoint 'HTTP: DELETE /Contributors/{ContributorId:int}'
2025-05-21 11:18:22.327 +01:00 [INF] Handling DeleteContributorCommand
2025-05-21 11:18:22.328 +01:00 [INF] Property ContributorId : 3
2025-05-21 11:18:22.331 +01:00 [INF] Deleting Contributor 3
2025-05-21 11:18:22.333 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."PhoneNumber_CountryCode", c."PhoneNumber_Extension", c."PhoneNumber_Number"
FROM "Contributors" AS c
WHERE c."Id" = @__p_0
LIMIT 1
2025-05-21 11:18:22.343 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Contributors"
WHERE "Id" = @p0;
2025-05-21 11:18:22.355 +01:00 [INF] Handling Contributed Deleted event for 3
2025-05-21 11:18:22.377 +01:00 [WRN] Sending email to to@test.com from from@test.com with subject Contributor Deleted using BD.PublicPortal.Infrastructure.Email.MimeKitEmailSender.
2025-05-21 11:18:22.580 +01:00 [INF] Handled DeleteContributorCommand with Ardalis.Result.Result in 250 ms
2025-05-21 11:18:22.581 +01:00 [INF] Executed endpoint 'HTTP: DELETE /Contributors/{ContributorId:int}'
2025-05-21 11:18:22.582 +01:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:57679/Contributors/3 - 204 null null 261.0101ms
2025-05-21 11:18:48.354 +01:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:57679/Contributors/3 - null null
2025-05-21 11:18:48.357 +01:00 [INF] Executing endpoint 'HTTP: DELETE /Contributors/{ContributorId:int}'
2025-05-21 11:18:48.358 +01:00 [INF] Handling DeleteContributorCommand
2025-05-21 11:18:48.358 +01:00 [INF] Property ContributorId : 3
2025-05-21 11:18:48.360 +01:00 [INF] Deleting Contributor 3
2025-05-21 11:18:48.362 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."PhoneNumber_CountryCode", c."PhoneNumber_Extension", c."PhoneNumber_Number"
FROM "Contributors" AS c
WHERE c."Id" = @__p_0
LIMIT 1
2025-05-21 11:18:48.363 +01:00 [INF] Handled DeleteContributorCommand with Ardalis.Result.Result in 3 ms
2025-05-21 11:18:48.365 +01:00 [INF] Executed endpoint 'HTTP: DELETE /Contributors/{ContributorId:int}'
2025-05-21 11:18:48.366 +01:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:57679/Contributors/3 - 404 null null 11.3446ms
2025-05-21 11:19:03.909 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/Contributors - application/json 89
2025-05-21 11:19:03.912 +01:00 [INF] Executing endpoint 'HTTP: POST /Contributors'
2025-05-21 11:19:03.913 +01:00 [INF] Handling CreateContributorCommand
2025-05-21 11:19:03.914 +01:00 [INF] Property Name : John Doe 2
2025-05-21 11:19:03.914 +01:00 [INF] Property PhoneNumber : 1234567890
2025-05-21 11:19:03.919 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?', @p4='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Contributors" ("Name", "Status", "PhoneNumber_CountryCode", "PhoneNumber_Extension", "PhoneNumber_Number")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-05-21 11:19:03.923 +01:00 [INF] Handled CreateContributorCommand with Ardalis.Result.Result`1[System.Int32] in 6 ms
2025-05-21 11:19:03.924 +01:00 [INF] Executed endpoint 'HTTP: POST /Contributors'
2025-05-21 11:19:03.925 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/Contributors - 200 null application/json; charset=utf-8 16.2679ms
2025-05-21 11:19:09.047 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/Contributors - application/json 89
2025-05-21 11:19:09.049 +01:00 [INF] Executing endpoint 'HTTP: POST /Contributors'
2025-05-21 11:19:09.051 +01:00 [INF] Handling CreateContributorCommand
2025-05-21 11:19:09.052 +01:00 [INF] Property Name : John Doe 2
2025-05-21 11:19:09.053 +01:00 [INF] Property PhoneNumber : 1234567890
2025-05-21 11:19:09.057 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?', @p4='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Contributors" ("Name", "Status", "PhoneNumber_CountryCode", "PhoneNumber_Extension", "PhoneNumber_Number")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-05-21 11:19:09.059 +01:00 [INF] Handled CreateContributorCommand with Ardalis.Result.Result`1[System.Int32] in 5 ms
2025-05-21 11:19:09.061 +01:00 [INF] Executed endpoint 'HTTP: POST /Contributors'
2025-05-21 11:19:09.062 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/Contributors - 200 null application/json; charset=utf-8 15.3807ms
2025-05-21 11:19:11.019 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/Contributors - application/json 89
2025-05-21 11:19:11.022 +01:00 [INF] Executing endpoint 'HTTP: POST /Contributors'
2025-05-21 11:19:11.023 +01:00 [INF] Handling CreateContributorCommand
2025-05-21 11:19:11.023 +01:00 [INF] Property Name : John Doe 2
2025-05-21 11:19:11.024 +01:00 [INF] Property PhoneNumber : 1234567890
2025-05-21 11:19:11.027 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?', @p4='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Contributors" ("Name", "Status", "PhoneNumber_CountryCode", "PhoneNumber_Extension", "PhoneNumber_Number")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-05-21 11:19:11.029 +01:00 [INF] Handled CreateContributorCommand with Ardalis.Result.Result`1[System.Int32] in 3 ms
2025-05-21 11:19:11.030 +01:00 [INF] Executed endpoint 'HTTP: POST /Contributors'
2025-05-21 11:19:11.031 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/Contributors - 200 null application/json; charset=utf-8 11.4711ms
2025-05-21 11:19:26.802 +01:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:57679/Contributors/6 - null null
2025-05-21 11:19:26.804 +01:00 [INF] Executing endpoint 'HTTP: DELETE /Contributors/{ContributorId:int}'
2025-05-21 11:19:26.806 +01:00 [INF] Handling DeleteContributorCommand
2025-05-21 11:19:26.807 +01:00 [INF] Property ContributorId : 6
2025-05-21 11:19:26.808 +01:00 [INF] Deleting Contributor 6
2025-05-21 11:19:26.810 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."PhoneNumber_CountryCode", c."PhoneNumber_Extension", c."PhoneNumber_Number"
FROM "Contributors" AS c
WHERE c."Id" = @__p_0
LIMIT 1
2025-05-21 11:19:26.812 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Contributors"
WHERE "Id" = @p0;
2025-05-21 11:19:26.814 +01:00 [INF] Handling Contributed Deleted event for 6
2025-05-21 11:19:26.815 +01:00 [WRN] Sending email to to@test.com from from@test.com with subject Contributor Deleted using BD.PublicPortal.Infrastructure.Email.MimeKitEmailSender.
2025-05-21 11:19:26.873 +01:00 [INF] Handled DeleteContributorCommand with Ardalis.Result.Result in 65 ms
2025-05-21 11:19:26.874 +01:00 [INF] Executed endpoint 'HTTP: DELETE /Contributors/{ContributorId:int}'
2025-05-21 11:19:26.875 +01:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:57679/Contributors/6 - 204 null null 72.8202ms
2025-05-21 11:19:37.771 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:57679/Wilayas - null null
2025-05-21 11:19:37.773 +01:00 [INF] Executing endpoint 'HTTP: GET /Wilayas'
2025-05-21 11:19:37.776 +01:00 [INF] Handling ListWilayasQuery
2025-05-21 11:19:37.784 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Nom"
FROM "Wilayas" AS w
2025-05-21 11:19:37.801 +01:00 [INF] Handled ListWilayasQuery with Ardalis.Result.Result`1[System.Collections.Generic.IEnumerable`1[BD.PublicPortal.Application.Wilayas.WilayaDTO]] in 24 ms
2025-05-21 11:19:37.803 +01:00 [INF] Executed endpoint 'HTTP: GET /Wilayas'
2025-05-21 11:19:37.804 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:57679/Wilayas - 200 null application/json; charset=utf-8 33.5365ms
2025-05-21 11:20:28.803 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:57679/Wilayas - null null
2025-05-21 11:20:28.806 +01:00 [INF] Executing endpoint 'HTTP: GET /Wilayas'
2025-05-21 11:20:28.806 +01:00 [INF] Handling ListWilayasQuery
2025-05-21 11:20:28.808 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Nom"
FROM "Wilayas" AS w
2025-05-21 11:20:28.810 +01:00 [INF] Handled ListWilayasQuery with Ardalis.Result.Result`1[System.Collections.Generic.IEnumerable`1[BD.PublicPortal.Application.Wilayas.WilayaDTO]] in 2 ms
2025-05-21 11:20:28.812 +01:00 [INF] Executed endpoint 'HTTP: GET /Wilayas'
2025-05-21 11:20:28.812 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:57679/Wilayas - 200 null application/json; charset=utf-8 11.3096ms
2025-05-21 11:20:32.692 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:57679/BTC/16 - null null
2025-05-21 11:20:32.695 +01:00 [INF] Executing endpoint 'HTTP: GET /BTC/{WilayaId:int?}'
2025-05-21 11:20:32.699 +01:00 [INF] Handling ListBloodTansfusionCentersQuery
2025-05-21 11:20:32.700 +01:00 [INF] Property WilayaId : 16
2025-05-21 11:20:32.709 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__wilayaID_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."Contact", b."Email", b."Name", b."Tel", b."WilayaId"
FROM "BloodTansfusionCenters" AS b
WHERE b."WilayaId" = @__wilayaID_0
2025-05-21 11:20:32.711 +01:00 [INF] Handled ListBloodTansfusionCentersQuery with Ardalis.Result.Result`1[System.Collections.Generic.IEnumerable`1[BD.PublicPortal.Application.BTC.BloodTansfusionCenterDTO]] in 10 ms
2025-05-21 11:20:32.714 +01:00 [INF] Executed endpoint 'HTTP: GET /BTC/{WilayaId:int?}'
2025-05-21 11:20:32.715 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:57679/BTC/16 - 200 null application/json; charset=utf-8 22.6228ms
