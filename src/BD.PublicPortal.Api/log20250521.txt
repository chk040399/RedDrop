2025-05-21 11:51:07.776 +01:00 [ERR] An error occurred using the connection to database 'BDCTS1' on server 'tcp://localhost:5432'.
2025-05-21 11:51:08.319 +01:00 [INF] Executed DbCommand (253ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "BDCTS1";
2025-05-21 11:51:08.716 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-05-21 11:51:08.722 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-05-21 11:51:08.726 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-05-21 11:51:08.729 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-05-21 11:51:08.737 +01:00 [INF] Applying migration '20250521105025_MigrationName'.
2025-05-21 11:51:08.787 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetRoles" (
    "Id" text NOT NULL,
    "Name" character varying(256),
    "NormalizedName" character varying(256),
    "ConcurrencyStamp" text,
    CONSTRAINT "PK_AspNetRoles" PRIMARY KEY ("Id")
);
2025-05-21 11:51:08.798 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Contributors" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Name" character varying(100) NOT NULL,
    "Status" integer NOT NULL,
    "PhoneNumber_CountryCode" text,
    "PhoneNumber_Number" text,
    "PhoneNumber_Extension" text,
    CONSTRAINT "PK_Contributors" PRIMARY KEY ("Id")
);
2025-05-21 11:51:08.802 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Wilayas" (
    "Id" integer NOT NULL,
    "Nom" text NOT NULL,
    CONSTRAINT "PK_Wilayas" PRIMARY KEY ("Id")
);
2025-05-21 11:51:08.819 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetRoleClaims" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "RoleId" text NOT NULL,
    "ClaimType" text,
    "ClaimValue" text,
    CONSTRAINT "PK_AspNetRoleClaims" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AspNetRoleClaims_AspNetRoles_RoleId" FOREIGN KEY ("RoleId") REFERENCES "AspNetRoles" ("Id") ON DELETE CASCADE
);
2025-05-21 11:51:08.825 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "BloodTansfusionCenters" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "Address" text,
    "Contact" text,
    "Email" text,
    "Tel" text,
    "WilayaId" integer NOT NULL,
    CONSTRAINT "PK_BloodTansfusionCenters" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_BloodTansfusionCenters_Wilayas_WilayaId" FOREIGN KEY ("WilayaId") REFERENCES "Wilayas" ("Id") ON DELETE RESTRICT
);
2025-05-21 11:51:08.829 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Communes" (
    "Id" integer NOT NULL,
    "Nom" text NOT NULL,
    "WilayaId" integer NOT NULL,
    CONSTRAINT "PK_Communes" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Communes_Wilayas_WilayaId" FOREIGN KEY ("WilayaId") REFERENCES "Wilayas" ("Id") ON DELETE CASCADE
);
2025-05-21 11:51:08.836 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "BloodDonationRequests" (
    "Id" uuid NOT NULL,
    "EvolutionStatus" integer NOT NULL,
    "DonationType" integer NOT NULL,
    "BloodGroup" integer NOT NULL,
    "RequestedQty" integer NOT NULL,
    "RequestDate" timestamp with time zone NOT NULL,
    "RequestDueDate" timestamp with time zone,
    "Priority" integer NOT NULL,
    "MoreDetails" text,
    "ServiceName" text,
    "BloodTansfusionCenterId" uuid NOT NULL,
    CONSTRAINT "PK_BloodDonationRequests" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_BloodDonationRequests_BloodTansfusionCenters_BloodTansfusio~" FOREIGN KEY ("BloodTansfusionCenterId") REFERENCES "BloodTansfusionCenters" ("Id") ON DELETE CASCADE
);
2025-05-21 11:51:08.839 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "BloodInventories" (
    "Id" uuid NOT NULL,
    "BloodTansfusionCenterId" uuid NOT NULL,
    "BloodGroup" integer NOT NULL,
    "BloodDonationType" integer NOT NULL,
    "TotalQty" integer,
    "MinQty" integer,
    "MaxQty" integer,
    CONSTRAINT "PK_BloodInventories" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_BloodInventories_BloodTansfusionCenters_BloodTansfusionCent~" FOREIGN KEY ("BloodTansfusionCenterId") REFERENCES "BloodTansfusionCenters" ("Id") ON DELETE CASCADE
);
2025-05-21 11:51:08.843 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUsers" (
    "Id" text NOT NULL,
    "IsAdmin" boolean NOT NULL,
    "DonorWantToStayAnonymous" boolean NOT NULL,
    "DonorExcludeFromPublicPortal" boolean NOT NULL,
    "DonorAvailability" integer,
    "DonorContactMethod" integer,
    "DonorName" text NOT NULL,
    "DonorBirthDate" timestamp with time zone NOT NULL,
    "DonorBloodGroup" integer NOT NULL,
    "DonorNIN" text NOT NULL,
    "DonorTel" text,
    "DonorNotesForBTC" text,
    "DonorLastDonationDate" timestamp with time zone,
    "CommuneId" integer,
    "UserName" character varying(256),
    "NormalizedUserName" character varying(256),
    "Email" character varying(256),
    "NormalizedEmail" character varying(256),
    "EmailConfirmed" boolean NOT NULL,
    "PasswordHash" text,
    "SecurityStamp" text,
    "ConcurrencyStamp" text,
    "PhoneNumber" text,
    "PhoneNumberConfirmed" boolean NOT NULL,
    "TwoFactorEnabled" boolean NOT NULL,
    "LockoutEnd" timestamp with time zone,
    "LockoutEnabled" boolean NOT NULL,
    "AccessFailedCount" integer NOT NULL,
    CONSTRAINT "PK_AspNetUsers" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AspNetUsers_Communes_CommuneId" FOREIGN KEY ("CommuneId") REFERENCES "Communes" ("Id")
);
2025-05-21 11:51:08.848 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUserClaims" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "UserId" text NOT NULL,
    "ClaimType" text,
    "ClaimValue" text,
    CONSTRAINT "PK_AspNetUserClaims" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AspNetUserClaims_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE
);
2025-05-21 11:51:08.852 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUserLogins" (
    "LoginProvider" text NOT NULL,
    "ProviderKey" text NOT NULL,
    "ProviderDisplayName" text,
    "UserId" text NOT NULL,
    CONSTRAINT "PK_AspNetUserLogins" PRIMARY KEY ("LoginProvider", "ProviderKey"),
    CONSTRAINT "FK_AspNetUserLogins_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE
);
2025-05-21 11:51:08.857 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUserRoles" (
    "UserId" text NOT NULL,
    "RoleId" text NOT NULL,
    CONSTRAINT "PK_AspNetUserRoles" PRIMARY KEY ("UserId", "RoleId"),
    CONSTRAINT "FK_AspNetUserRoles_AspNetRoles_RoleId" FOREIGN KEY ("RoleId") REFERENCES "AspNetRoles" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_AspNetUserRoles_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE
);
2025-05-21 11:51:08.862 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUserTokens" (
    "UserId" text NOT NULL,
    "LoginProvider" text NOT NULL,
    "Name" text NOT NULL,
    "Value" text,
    CONSTRAINT "PK_AspNetUserTokens" PRIMARY KEY ("UserId", "LoginProvider", "Name"),
    CONSTRAINT "FK_AspNetUserTokens_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE
);
2025-05-21 11:51:08.873 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "BloodDonationPledges" (
    "Id" uuid NOT NULL,
    "EvolutionStatus" integer NOT NULL,
    "PledgeInitiatedDate" timestamp with time zone NOT NULL,
    "PledgeDate" timestamp with time zone,
    "PledgeHonoredOrCanceledDate" timestamp with time zone,
    "PledgeNotes" text,
    "CantBeDoneReason" text,
    "BloodDonationRequestId" uuid NOT NULL,
    "ApplicationUserId" text NOT NULL,
    CONSTRAINT "PK_BloodDonationPledges" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_BloodDonationPledges_AspNetUsers_ApplicationUserId" FOREIGN KEY ("ApplicationUserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_BloodDonationPledges_BloodDonationRequests_BloodDonationReq~" FOREIGN KEY ("BloodDonationRequestId") REFERENCES "BloodDonationRequests" ("Id") ON DELETE CASCADE
);
2025-05-21 11:51:08.878 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "DonorBloodTransferCenterSubscriptions" (
    "Id" uuid NOT NULL,
    "BloodTansfusionCenterId" uuid NOT NULL,
    "ApplicationUserId" text NOT NULL,
    CONSTRAINT "PK_DonorBloodTransferCenterSubscriptions" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_DonorBloodTransferCenterSubscriptions_AspNetUsers_Applicati~" FOREIGN KEY ("ApplicationUserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_DonorBloodTransferCenterSubscriptions_BloodTansfusionCenter~" FOREIGN KEY ("BloodTansfusionCenterId") REFERENCES "BloodTansfusionCenters" ("Id") ON DELETE CASCADE
);
2025-05-21 11:51:08.879 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetRoleClaims_RoleId" ON "AspNetRoleClaims" ("RoleId");
2025-05-21 11:51:08.881 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "RoleNameIndex" ON "AspNetRoles" ("NormalizedName");
2025-05-21 11:51:08.882 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetUserClaims_UserId" ON "AspNetUserClaims" ("UserId");
2025-05-21 11:51:08.884 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetUserLogins_UserId" ON "AspNetUserLogins" ("UserId");
2025-05-21 11:51:08.885 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetUserRoles_RoleId" ON "AspNetUserRoles" ("RoleId");
2025-05-21 11:51:08.886 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "EmailIndex" ON "AspNetUsers" ("NormalizedEmail");
2025-05-21 11:51:08.887 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetUsers_CommuneId" ON "AspNetUsers" ("CommuneId");
2025-05-21 11:51:08.889 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "UserNameIndex" ON "AspNetUsers" ("NormalizedUserName");
2025-05-21 11:51:08.890 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_BloodDonationPledges_ApplicationUserId" ON "BloodDonationPledges" ("ApplicationUserId");
2025-05-21 11:51:08.891 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_BloodDonationPledges_BloodDonationRequestId" ON "BloodDonationPledges" ("BloodDonationRequestId");
2025-05-21 11:51:08.892 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_BloodDonationRequests_BloodTansfusionCenterId" ON "BloodDonationRequests" ("BloodTansfusionCenterId");
2025-05-21 11:51:08.894 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_BloodInventories_BloodTansfusionCenterId" ON "BloodInventories" ("BloodTansfusionCenterId");
2025-05-21 11:51:08.895 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_BloodTansfusionCenters_WilayaId" ON "BloodTansfusionCenters" ("WilayaId");
2025-05-21 11:51:08.974 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Communes_WilayaId" ON "Communes" ("WilayaId");
2025-05-21 11:51:08.976 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_DonorBloodTransferCenterSubscriptions_ApplicationUserId" ON "DonorBloodTransferCenterSubscriptions" ("ApplicationUserId");
2025-05-21 11:51:08.978 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_DonorBloodTransferCenterSubscriptions_BloodTansfusionCenter~" ON "DonorBloodTransferCenterSubscriptions" ("BloodTansfusionCenterId");
2025-05-21 11:51:08.978 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250521105025_MigrationName', '9.0.4');
2025-05-21 11:55:30.028 +01:00 [INF] User profile is available. Using 'C:\Users\CHK\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-21 11:55:30.111 +01:00 [INF] Registered 8 endpoints in 351 milliseconds.
2025-05-21 11:55:31.145 +01:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2025-05-21 11:55:31.423 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Contributors" AS c)
2025-05-21 11:55:31.577 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Contributors" ("Name", "Status")
VALUES (@p0, @p1)
RETURNING "Id";
INSERT INTO "Contributors" ("Name", "Status")
VALUES (@p2, @p3)
RETURNING "Id";
2025-05-21 11:55:32.406 +01:00 [INF] Now listening on: https://localhost:57679
2025-05-21 11:55:32.414 +01:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-05-21 11:55:32.463 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-21 11:55:32.466 +01:00 [INF] Hosting environment: Development
2025-05-21 11:55:32.466 +01:00 [INF] Content root path: D:\walid-pfe\BloodDrop\src\BD.PublicPortal.Api
2025-05-21 12:20:53.218 +01:00 [ERR] An error occurred using the connection to database 'BDCTS' on server 'tcp://localhost:5432'.
2025-05-21 12:20:53.691 +01:00 [INF] Executed DbCommand (208ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "BDCTS";
2025-05-21 12:20:53.942 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-05-21 12:20:53.947 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-05-21 12:20:53.948 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-05-21 12:20:53.950 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-05-21 12:20:53.956 +01:00 [INF] Applying migration '20250521111908_MigrationName'.
2025-05-21 12:20:53.991 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetRoles" (
    "Id" uuid NOT NULL,
    "Name" character varying(256),
    "NormalizedName" character varying(256),
    "ConcurrencyStamp" text,
    CONSTRAINT "PK_AspNetRoles" PRIMARY KEY ("Id")
);
2025-05-21 12:20:53.998 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Contributors" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Name" character varying(100) NOT NULL,
    "Status" integer NOT NULL,
    "PhoneNumber_CountryCode" text,
    "PhoneNumber_Number" text,
    "PhoneNumber_Extension" text,
    CONSTRAINT "PK_Contributors" PRIMARY KEY ("Id")
);
2025-05-21 12:20:54.001 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Wilayas" (
    "Id" integer NOT NULL,
    "Nom" text NOT NULL,
    CONSTRAINT "PK_Wilayas" PRIMARY KEY ("Id")
);
2025-05-21 12:20:54.014 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetRoleClaims" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "RoleId" uuid NOT NULL,
    "ClaimType" text,
    "ClaimValue" text,
    CONSTRAINT "PK_AspNetRoleClaims" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AspNetRoleClaims_AspNetRoles_RoleId" FOREIGN KEY ("RoleId") REFERENCES "AspNetRoles" ("Id") ON DELETE CASCADE
);
2025-05-21 12:20:54.017 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "BloodTansfusionCenters" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "Address" text,
    "Contact" text,
    "Email" text,
    "Tel" text,
    "WilayaId" integer NOT NULL,
    CONSTRAINT "PK_BloodTansfusionCenters" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_BloodTansfusionCenters_Wilayas_WilayaId" FOREIGN KEY ("WilayaId") REFERENCES "Wilayas" ("Id") ON DELETE RESTRICT
);
2025-05-21 12:20:54.020 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Communes" (
    "Id" integer NOT NULL,
    "Nom" text NOT NULL,
    "WilayaId" integer NOT NULL,
    CONSTRAINT "PK_Communes" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Communes_Wilayas_WilayaId" FOREIGN KEY ("WilayaId") REFERENCES "Wilayas" ("Id") ON DELETE CASCADE
);
2025-05-21 12:20:54.026 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "BloodDonationRequests" (
    "Id" uuid NOT NULL,
    "EvolutionStatus" integer NOT NULL,
    "DonationType" integer NOT NULL,
    "BloodGroup" integer NOT NULL,
    "RequestedQty" integer NOT NULL,
    "RequestDate" timestamp with time zone NOT NULL,
    "RequestDueDate" timestamp with time zone,
    "Priority" integer NOT NULL,
    "MoreDetails" text,
    "ServiceName" text,
    "BloodTansfusionCenterId" uuid NOT NULL,
    CONSTRAINT "PK_BloodDonationRequests" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_BloodDonationRequests_BloodTansfusionCenters_BloodTansfusio~" FOREIGN KEY ("BloodTansfusionCenterId") REFERENCES "BloodTansfusionCenters" ("Id") ON DELETE CASCADE
);
2025-05-21 12:20:54.028 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "BloodInventories" (
    "Id" uuid NOT NULL,
    "BloodTansfusionCenterId" uuid NOT NULL,
    "BloodGroup" integer NOT NULL,
    "BloodDonationType" integer NOT NULL,
    "TotalQty" integer,
    "MinQty" integer,
    "MaxQty" integer,
    CONSTRAINT "PK_BloodInventories" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_BloodInventories_BloodTansfusionCenters_BloodTansfusionCent~" FOREIGN KEY ("BloodTansfusionCenterId") REFERENCES "BloodTansfusionCenters" ("Id") ON DELETE CASCADE
);
2025-05-21 12:20:54.032 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUsers" (
    "Id" uuid NOT NULL,
    "IsAdmin" boolean NOT NULL,
    "DonorWantToStayAnonymous" boolean NOT NULL,
    "DonorExcludeFromPublicPortal" boolean NOT NULL,
    "DonorAvailability" integer,
    "DonorContactMethod" integer,
    "DonorName" text NOT NULL,
    "DonorBirthDate" timestamp with time zone NOT NULL,
    "DonorBloodGroup" integer NOT NULL,
    "DonorNIN" text NOT NULL,
    "DonorTel" text,
    "DonorNotesForBTC" text,
    "DonorLastDonationDate" timestamp with time zone,
    "CommuneId" integer,
    "UserName" character varying(256),
    "NormalizedUserName" character varying(256),
    "Email" character varying(256),
    "NormalizedEmail" character varying(256),
    "EmailConfirmed" boolean NOT NULL,
    "PasswordHash" text,
    "SecurityStamp" text,
    "ConcurrencyStamp" text,
    "PhoneNumber" text,
    "PhoneNumberConfirmed" boolean NOT NULL,
    "TwoFactorEnabled" boolean NOT NULL,
    "LockoutEnd" timestamp with time zone,
    "LockoutEnabled" boolean NOT NULL,
    "AccessFailedCount" integer NOT NULL,
    CONSTRAINT "PK_AspNetUsers" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AspNetUsers_Communes_CommuneId" FOREIGN KEY ("CommuneId") REFERENCES "Communes" ("Id")
);
2025-05-21 12:20:54.036 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUserClaims" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "UserId" uuid NOT NULL,
    "ClaimType" text,
    "ClaimValue" text,
    CONSTRAINT "PK_AspNetUserClaims" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AspNetUserClaims_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE
);
2025-05-21 12:20:54.040 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUserLogins" (
    "LoginProvider" text NOT NULL,
    "ProviderKey" text NOT NULL,
    "ProviderDisplayName" text,
    "UserId" uuid NOT NULL,
    CONSTRAINT "PK_AspNetUserLogins" PRIMARY KEY ("LoginProvider", "ProviderKey"),
    CONSTRAINT "FK_AspNetUserLogins_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE
);
2025-05-21 12:20:54.042 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUserRoles" (
    "UserId" uuid NOT NULL,
    "RoleId" uuid NOT NULL,
    CONSTRAINT "PK_AspNetUserRoles" PRIMARY KEY ("UserId", "RoleId"),
    CONSTRAINT "FK_AspNetUserRoles_AspNetRoles_RoleId" FOREIGN KEY ("RoleId") REFERENCES "AspNetRoles" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_AspNetUserRoles_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE
);
2025-05-21 12:20:54.046 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUserTokens" (
    "UserId" uuid NOT NULL,
    "LoginProvider" text NOT NULL,
    "Name" text NOT NULL,
    "Value" text,
    CONSTRAINT "PK_AspNetUserTokens" PRIMARY KEY ("UserId", "LoginProvider", "Name"),
    CONSTRAINT "FK_AspNetUserTokens_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE
);
2025-05-21 12:20:54.052 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "BloodDonationPledges" (
    "Id" uuid NOT NULL,
    "EvolutionStatus" integer NOT NULL,
    "PledgeInitiatedDate" timestamp with time zone NOT NULL,
    "PledgeDate" timestamp with time zone,
    "PledgeHonoredOrCanceledDate" timestamp with time zone,
    "PledgeNotes" text,
    "CantBeDoneReason" text,
    "BloodDonationRequestId" uuid NOT NULL,
    "ApplicationUserId" uuid NOT NULL,
    CONSTRAINT "PK_BloodDonationPledges" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_BloodDonationPledges_AspNetUsers_ApplicationUserId" FOREIGN KEY ("ApplicationUserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_BloodDonationPledges_BloodDonationRequests_BloodDonationReq~" FOREIGN KEY ("BloodDonationRequestId") REFERENCES "BloodDonationRequests" ("Id") ON DELETE CASCADE
);
2025-05-21 12:20:54.055 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "DonorBloodTransferCenterSubscriptions" (
    "Id" uuid NOT NULL,
    "BloodTansfusionCenterId" uuid NOT NULL,
    "ApplicationUserId" uuid NOT NULL,
    CONSTRAINT "PK_DonorBloodTransferCenterSubscriptions" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_DonorBloodTransferCenterSubscriptions_AspNetUsers_Applicati~" FOREIGN KEY ("ApplicationUserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_DonorBloodTransferCenterSubscriptions_BloodTansfusionCenter~" FOREIGN KEY ("BloodTansfusionCenterId") REFERENCES "BloodTansfusionCenters" ("Id") ON DELETE CASCADE
);
2025-05-21 12:20:54.056 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetRoleClaims_RoleId" ON "AspNetRoleClaims" ("RoleId");
2025-05-21 12:20:54.057 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "RoleNameIndex" ON "AspNetRoles" ("NormalizedName");
2025-05-21 12:20:54.058 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetUserClaims_UserId" ON "AspNetUserClaims" ("UserId");
2025-05-21 12:20:54.059 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetUserLogins_UserId" ON "AspNetUserLogins" ("UserId");
2025-05-21 12:20:54.060 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetUserRoles_RoleId" ON "AspNetUserRoles" ("RoleId");
2025-05-21 12:20:54.061 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "EmailIndex" ON "AspNetUsers" ("NormalizedEmail");
2025-05-21 12:20:54.062 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetUsers_CommuneId" ON "AspNetUsers" ("CommuneId");
2025-05-21 12:20:54.063 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "UserNameIndex" ON "AspNetUsers" ("NormalizedUserName");
2025-05-21 12:20:54.064 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_BloodDonationPledges_ApplicationUserId" ON "BloodDonationPledges" ("ApplicationUserId");
2025-05-21 12:20:54.065 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_BloodDonationPledges_BloodDonationRequestId" ON "BloodDonationPledges" ("BloodDonationRequestId");
2025-05-21 12:20:54.066 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_BloodDonationRequests_BloodTansfusionCenterId" ON "BloodDonationRequests" ("BloodTansfusionCenterId");
2025-05-21 12:20:54.067 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_BloodInventories_BloodTansfusionCenterId" ON "BloodInventories" ("BloodTansfusionCenterId");
2025-05-21 12:20:54.068 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_BloodTansfusionCenters_WilayaId" ON "BloodTansfusionCenters" ("WilayaId");
2025-05-21 12:20:54.069 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Communes_WilayaId" ON "Communes" ("WilayaId");
2025-05-21 12:20:54.070 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_DonorBloodTransferCenterSubscriptions_ApplicationUserId" ON "DonorBloodTransferCenterSubscriptions" ("ApplicationUserId");
2025-05-21 12:20:54.071 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_DonorBloodTransferCenterSubscriptions_BloodTansfusionCenter~" ON "DonorBloodTransferCenterSubscriptions" ("BloodTansfusionCenterId");
2025-05-21 12:20:54.071 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250521111908_MigrationName', '9.0.4');
2025-05-21 12:24:01.806 +01:00 [INF] User profile is available. Using 'C:\Users\CHK\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-21 12:24:01.897 +01:00 [INF] Registered 8 endpoints in 371 milliseconds.
2025-05-21 12:24:03.143 +01:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2025-05-21 12:24:03.408 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Contributors" AS c)
2025-05-21 12:24:03.608 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Contributors" ("Name", "Status")
VALUES (@p0, @p1)
RETURNING "Id";
INSERT INTO "Contributors" ("Name", "Status")
VALUES (@p2, @p3)
RETURNING "Id";
2025-05-21 12:24:04.153 +01:00 [INF] Now listening on: https://localhost:57679
2025-05-21 12:24:04.159 +01:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-05-21 12:24:04.203 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-21 12:24:04.204 +01:00 [INF] Hosting environment: Development
2025-05-21 12:24:04.206 +01:00 [INF] Content root path: D:\walid-pfe\BloodDrop\src\BD.PublicPortal.Api
2025-05-21 12:26:12.145 +01:00 [INF] User profile is available. Using 'C:\Users\CHK\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-21 12:26:12.269 +01:00 [INF] Registered 8 endpoints in 508 milliseconds.
2025-05-21 12:26:13.654 +01:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2025-05-21 12:26:13.911 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Contributors" AS c)
2025-05-21 12:26:14.157 +01:00 [INF] Now listening on: https://localhost:57679
2025-05-21 12:26:14.163 +01:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-05-21 12:26:14.208 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-21 12:26:14.209 +01:00 [INF] Hosting environment: Development
2025-05-21 12:26:14.209 +01:00 [INF] Content root path: D:\walid-pfe\BloodDrop\src\BD.PublicPortal.Api
2025-05-21 12:26:48.601 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:57679/Contributors - null null
2025-05-21 12:26:48.670 +01:00 [INF] Executing endpoint 'HTTP: GET /Contributors'
2025-05-21 12:26:48.703 +01:00 [INF] Handling ListContributorsQuery
2025-05-21 12:26:48.706 +01:00 [INF] Property Skip : null
2025-05-21 12:26:48.708 +01:00 [INF] Property Take : null
2025-05-21 12:26:48.843 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "Id", "Name", "PhoneNumber_Number" AS PhoneNumber FROM "Contributors"
2025-05-21 12:26:48.855 +01:00 [INF] Handled ListContributorsQuery with Ardalis.Result.Result`1[System.Collections.Generic.IEnumerable`1[BD.PublicPortal.Infrastructure.Services.Contibutors.ContributorDTO]] in 145 ms
2025-05-21 12:26:48.872 +01:00 [INF] Executed endpoint 'HTTP: GET /Contributors'
2025-05-21 12:26:48.880 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:57679/Contributors - 200 null application/json; charset=utf-8 284.6244ms
2025-05-21 12:27:10.426 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:57679/Contributors/2 - null null
2025-05-21 12:27:10.439 +01:00 [INF] Executing endpoint 'HTTP: GET /Contributors/{ContributorId:int}'
2025-05-21 12:27:10.464 +01:00 [INF] Handling GetContributorQuery
2025-05-21 12:27:10.466 +01:00 [INF] Property ContributorId : 2
2025-05-21 12:27:10.576 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__contributorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."PhoneNumber_CountryCode", c."PhoneNumber_Extension", c."PhoneNumber_Number"
FROM "Contributors" AS c
WHERE c."Id" = @__contributorId_0
LIMIT 1
2025-05-21 12:27:10.611 +01:00 [INF] Handled GetContributorQuery with Ardalis.Result.Result`1[BD.PublicPortal.Infrastructure.Services.Contibutors.ContributorDTO] in 144 ms
2025-05-21 12:27:10.615 +01:00 [INF] Executed endpoint 'HTTP: GET /Contributors/{ContributorId:int}'
2025-05-21 12:27:10.616 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:57679/Contributors/2 - 200 null application/json; charset=utf-8 190.8171ms
2025-05-21 12:27:13.701 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/Contributors - application/json 89
2025-05-21 12:27:13.704 +01:00 [INF] Executing endpoint 'HTTP: POST /Contributors'
2025-05-21 12:27:13.714 +01:00 [INF] Handling CreateContributorCommand
2025-05-21 12:27:13.715 +01:00 [INF] Property Name : John Doe 2
2025-05-21 12:27:13.716 +01:00 [INF] Property PhoneNumber : 1234567890
2025-05-21 12:27:13.799 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?', @p4='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Contributors" ("Name", "Status", "PhoneNumber_CountryCode", "PhoneNumber_Extension", "PhoneNumber_Number")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-05-21 12:27:13.818 +01:00 [INF] Handled CreateContributorCommand with Ardalis.Result.Result`1[System.Int32] in 101 ms
2025-05-21 12:27:13.821 +01:00 [INF] Executed endpoint 'HTTP: POST /Contributors'
2025-05-21 12:27:13.822 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/Contributors - 200 null application/json; charset=utf-8 121.6023ms
2025-05-21 12:27:15.260 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/Contributors - application/json 89
2025-05-21 12:27:15.262 +01:00 [INF] Executing endpoint 'HTTP: POST /Contributors'
2025-05-21 12:27:15.263 +01:00 [INF] Handling CreateContributorCommand
2025-05-21 12:27:15.264 +01:00 [INF] Property Name : John Doe 2
2025-05-21 12:27:15.265 +01:00 [INF] Property PhoneNumber : 1234567890
2025-05-21 12:27:15.268 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?', @p4='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Contributors" ("Name", "Status", "PhoneNumber_CountryCode", "PhoneNumber_Extension", "PhoneNumber_Number")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-05-21 12:27:15.270 +01:00 [INF] Handled CreateContributorCommand with Ardalis.Result.Result`1[System.Int32] in 4 ms
2025-05-21 12:27:15.272 +01:00 [INF] Executed endpoint 'HTTP: POST /Contributors'
2025-05-21 12:27:15.272 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/Contributors - 200 null application/json; charset=utf-8 12.5093ms
2025-05-21 12:27:20.241 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:57679/Contributors/3 - application/json 38
2025-05-21 12:27:20.244 +01:00 [INF] Executing endpoint 'HTTP: PUT /Contributors/{ContributorId:int}'
2025-05-21 12:27:20.249 +01:00 [INF] Handling UpdateContributorCommand
2025-05-21 12:27:20.250 +01:00 [INF] Property ContributorId : 3
2025-05-21 12:27:20.251 +01:00 [INF] Property NewName : ardalis2
2025-05-21 12:27:20.272 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."PhoneNumber_CountryCode", c."PhoneNumber_Extension", c."PhoneNumber_Number"
FROM "Contributors" AS c
WHERE c."Id" = @__p_0
LIMIT 1
2025-05-21 12:27:20.282 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contributors" SET "Name" = @p0, "Status" = @p1
WHERE "Id" = @p2;
2025-05-21 12:27:20.284 +01:00 [INF] Handled UpdateContributorCommand with Ardalis.Result.Result`1[BD.PublicPortal.Infrastructure.Services.Contibutors.ContributorDTO] in 31 ms
2025-05-21 12:27:20.286 +01:00 [INF] Handling GetContributorQuery
2025-05-21 12:27:20.287 +01:00 [INF] Property ContributorId : 3
2025-05-21 12:27:20.290 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__contributorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."PhoneNumber_CountryCode", c."PhoneNumber_Extension", c."PhoneNumber_Number"
FROM "Contributors" AS c
WHERE c."Id" = @__contributorId_0
LIMIT 1
2025-05-21 12:27:20.292 +01:00 [INF] Handled GetContributorQuery with Ardalis.Result.Result`1[BD.PublicPortal.Infrastructure.Services.Contibutors.ContributorDTO] in 4 ms
2025-05-21 12:27:20.293 +01:00 [INF] Executed endpoint 'HTTP: PUT /Contributors/{ContributorId:int}'
2025-05-21 12:27:20.294 +01:00 [INF] Request finished HTTP/1.1 PUT https://localhost:57679/Contributors/3 - 200 null application/json; charset=utf-8 52.8704ms
2025-05-21 12:27:27.564 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/Contributors - application/json 89
2025-05-21 12:27:27.566 +01:00 [INF] Executing endpoint 'HTTP: POST /Contributors'
2025-05-21 12:27:27.568 +01:00 [INF] Handling CreateContributorCommand
2025-05-21 12:27:27.569 +01:00 [INF] Property Name : John Doe 2
2025-05-21 12:27:27.569 +01:00 [INF] Property PhoneNumber : 1234567890
2025-05-21 12:27:27.574 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?', @p4='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Contributors" ("Name", "Status", "PhoneNumber_CountryCode", "PhoneNumber_Extension", "PhoneNumber_Number")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-05-21 12:27:27.577 +01:00 [INF] Handled CreateContributorCommand with Ardalis.Result.Result`1[System.Int32] in 6 ms
2025-05-21 12:27:27.578 +01:00 [INF] Executed endpoint 'HTTP: POST /Contributors'
2025-05-21 12:27:27.579 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/Contributors - 200 null application/json; charset=utf-8 15.4655ms
2025-05-21 12:27:29.142 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/Contributors - application/json 89
2025-05-21 12:27:29.144 +01:00 [INF] Executing endpoint 'HTTP: POST /Contributors'
2025-05-21 12:27:29.145 +01:00 [INF] Handling CreateContributorCommand
2025-05-21 12:27:29.145 +01:00 [INF] Property Name : John Doe 2
2025-05-21 12:27:29.146 +01:00 [INF] Property PhoneNumber : 1234567890
2025-05-21 12:27:29.149 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?', @p4='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Contributors" ("Name", "Status", "PhoneNumber_CountryCode", "PhoneNumber_Extension", "PhoneNumber_Number")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-05-21 12:27:29.150 +01:00 [INF] Handled CreateContributorCommand with Ardalis.Result.Result`1[System.Int32] in 3 ms
2025-05-21 12:27:29.151 +01:00 [INF] Executed endpoint 'HTTP: POST /Contributors'
2025-05-21 12:27:29.153 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/Contributors - 200 null application/json; charset=utf-8 10.8194ms
2025-05-21 12:27:32.305 +01:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:57679/Contributors/6 - null null
2025-05-21 12:27:32.308 +01:00 [INF] Executing endpoint 'HTTP: DELETE /Contributors/{ContributorId:int}'
2025-05-21 12:27:32.311 +01:00 [INF] Handling DeleteContributorCommand
2025-05-21 12:27:32.312 +01:00 [INF] Property ContributorId : 6
2025-05-21 12:27:32.314 +01:00 [INF] Deleting Contributor 6
2025-05-21 12:27:32.316 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."PhoneNumber_CountryCode", c."PhoneNumber_Extension", c."PhoneNumber_Number"
FROM "Contributors" AS c
WHERE c."Id" = @__p_0
LIMIT 1
2025-05-21 12:27:32.325 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Contributors"
WHERE "Id" = @p0;
2025-05-21 12:27:32.335 +01:00 [INF] Handling Contributed Deleted event for 6
2025-05-21 12:27:32.349 +01:00 [WRN] Sending email to to@test.com from from@test.com with subject Contributor Deleted using BD.PublicPortal.Infrastructure.Email.MimeKitEmailSender.
2025-05-21 12:27:32.521 +01:00 [INF] Handled DeleteContributorCommand with Ardalis.Result.Result in 208 ms
2025-05-21 12:27:32.523 +01:00 [INF] Executed endpoint 'HTTP: DELETE /Contributors/{ContributorId:int}'
2025-05-21 12:27:32.524 +01:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:57679/Contributors/6 - 204 null null 218.6414ms
2025-05-21 12:27:50.320 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:57679/Wilayas - null null
2025-05-21 12:27:50.322 +01:00 [INF] Executing endpoint 'HTTP: GET /Wilayas'
2025-05-21 12:27:50.325 +01:00 [INF] Handling ListWilayasQuery
2025-05-21 12:27:50.332 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Nom"
FROM "Wilayas" AS w
2025-05-21 12:27:50.340 +01:00 [INF] Handled ListWilayasQuery with Ardalis.Result.Result`1[System.Collections.Generic.IEnumerable`1[BD.PublicPortal.Application.Wilayas.WilayaDTO]] in 14 ms
2025-05-21 12:27:50.343 +01:00 [INF] Executed endpoint 'HTTP: GET /Wilayas'
2025-05-21 12:27:50.344 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:57679/Wilayas - 200 null application/json; charset=utf-8 24.2673ms
2025-05-21 12:28:37.705 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:57679/BTC/16 - null null
2025-05-21 12:28:37.707 +01:00 [INF] Executing endpoint 'HTTP: GET /BTC/{WilayaId:int?}'
2025-05-21 12:28:37.710 +01:00 [INF] Handling ListBloodTansfusionCentersQuery
2025-05-21 12:28:37.711 +01:00 [INF] Property WilayaId : 16
2025-05-21 12:28:37.720 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__wilayaID_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."Contact", b."Email", b."Name", b."Tel", b."WilayaId"
FROM "BloodTansfusionCenters" AS b
WHERE b."WilayaId" = @__wilayaID_0
2025-05-21 12:28:37.723 +01:00 [INF] Handled ListBloodTansfusionCentersQuery with Ardalis.Result.Result`1[System.Collections.Generic.IEnumerable`1[BD.PublicPortal.Application.BTC.BloodTansfusionCenterDTO]] in 10 ms
2025-05-21 12:28:37.725 +01:00 [INF] Executed endpoint 'HTTP: GET /BTC/{WilayaId:int?}'
2025-05-21 12:28:37.726 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:57679/BTC/16 - 200 null application/json; charset=utf-8 20.8237ms
